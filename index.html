<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image.prod.js"></script>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/dist/mindar-image-aframe.prod.js"></script>
    <script type="text/javascript">
        var count = 1;
        var interval;

        document.addEventListener("DOMContentLoaded", function() {
            const targets = [document.querySelector('#target1'),
                             document.querySelector('#target2'),
                             document.querySelector('#target3'),
                             document.querySelector('#target4'),
                             document.querySelector('#target5'),
                             document.querySelector('#target6')];

            const vids = [document.querySelector('#vid1'),
                          document.querySelector('#vid2'),
                          document.querySelector('#vid3'),
                          document.querySelector('#vid4'),
                          document.querySelector('#vid5'),
                          document.querySelector('#vid6')];

            // detect target found
            for (target of targets) {
                target.addEventListener("targetFound", event => {
                    const trgt = parseInt(event.target.id.charAt(6));
                    var folder = "./video1/";
                    var maxCount = 64;//animações têm 64 quadros
                    if(trgt == 3) {
                        folder = "./video2/";
                        maxCount = 75;//animação dos coelhos
                    }
                    
                    if(trgt == 5) {
                        folder = "./video3/";
                        maxCount = 27;//animação dos patos  
                    }
                    
                    if(trgt == 4) {
                        folder = "./video4/";
                        maxCount = 19;//animação do dinossauro 
                    }
                    
                    if(trgt == 2) {
                        folder = "./video5/";
                        maxCount = 255;//animação do dinossauro 
                    }
                    
                    interval = setInterval(function () {
                        count += 1;
                        if (count == maxCount) count = 1; 
                        vids[trgt-1].setAttribute("src",folder+"im ("+count+").jpg");
                    },66); //modifique esse valor de 66 milissegundos para aumentar ou diminuir a velocidade do vídeo
                });

                target.addEventListener("targetLost", event => {
                    clearInterval(interval);
                });
            }
        });
    </script>
</head>
<body>
    <a-scene mindar-image="filterMinCF:0.0; filterBeta: 10000; imageTargetSrc: targets.mind"; color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
    <a-assets>
        <img id="card" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/image-tracking/assets/card-example/card.png"/>
        <a-asset-item id="avatarModel" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.4/examples/image-tracking/assets/card-example/softmind/scene.gltf"></a-asset-item>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    <a-entity id="target1" mindar-image-target="targetIndex: 0">
         <a-image id="vid1" src="./video1/im (1).jpg" opacity="1.0" position="0 0 0" height="1.5" width="1.5" rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target2" mindar-image-target="targetIndex: 1">
         <a-image id="vid2" src="./video5/im (1).jpg" opacity="1.0" position="0 0 0" height="2.3" width="2.3" rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target3" mindar-image-target="targetIndex: 2">
         <a-image id="vid3" src="./video2/im (1).jpg" opacity="1.0" position="0 0 0" height="1.5" width="1.5" rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target4" mindar-image-target="targetIndex: 3">
         <a-image id="vid4" src="./video4/im (1).jpg" opacity="1.0" position="0 0 0" height="1.5" width="1.5" rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target5" mindar-image-target="targetIndex: 4">
         <a-image id="vid5" src="./video3/im (1).jpg" opacity="1.0" position="0 0 0" height="1.5" width="1.5" rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target6" mindar-image-target="targetIndex: 5">
         <a-image id="vid6" src="./video1/im (1).jpg" opacity="1.0" position="0 0 0" height="1.5" width="1.5" rotation="0 0 0"></a-plane>
    </a-entity>
    </a-scene>
</body>
</html>
